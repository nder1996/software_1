<!--
  Recuerde conservar los id, no deben ser modificados
  ids = user-list__filter, user-list__table, user-list__table-item-[index], user-list__table-item-[index]-avatar, user-list__table-item-[index]-first_name, user-list__table-item-[index]-email, user-list__table-item-[index]-btn-delete
  Remplazar [index] por el valor ejemplo "user-list__table-item-0"
-->

<br><br>
<div class="marco-table-user mt-5">
  <h1>User Management</h1>
  <div class="filter-div mt-3">
    <input id="user-list__filter" type="text" [(ngModel)]="searchTerm" (input)="onSearchInput($event)" (keyup)="onSearchInput($event)" placeholder="Search by name">
  </div>


  <table id="user-list__table" class="user-table card">
    <thead>
      <tr>
        <th>ID</th>
        <th>Email</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Avatar</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of listUser; let i = index" id="user-list__table-item-{{i}}">
        <td>{{ user.id }}</td>
        <td id="user-list__table-item-{{i}}-email">{{ user.email }}</td>
        <td id="user-list__table-item-{{i}}-first_name">{{ user.first_name }}</td>
        <td id="user-list__table-item-{{i}}-last_name">{{ user.last_name }}</td>
        <td>
          <img id="user-list__table-item-{{i}}-avatar" [src]="user.avatar" alt="{{ user.first_name }} {{ user.last_name }}" class="avatar-img">
        </td>
        <td>
          <button id="user-list__table-item-{{i}}-btn-delete" class="danger outlined" style="width: 100px;" (click)="deleteUser(user)">delete</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Paginación Bootstrap 5 Style -->
  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <a class="page-link" (click)="previousPage()" [attr.aria-disabled]="currentPage === 1">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
      <li class="page-item" 
          *ngFor="let page of getPageNumbers()" 
          [class.active]="currentPage === page">
        <a class="page-link" (click)="showPage(page)">{{ page }}</a>
      </li>
      <li class="page-item" [class.disabled]="currentPage === totalPages">
        <a class="page-link" (click)="nextPage()" [attr.aria-disabled]="currentPage === totalPages">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
    </ul>
  </nav>

</div>



<dialog #myDialog>
  <p class="text-center">¿Estás seguro de que deseas eliminar el registro?</p>
  <div class="dialog-buttons">
    <button class="outlined close-btn" (click)="closeDialog()">Cerrar</button>
    <button (click)="deleteUser()" class="danger outlined">Eliminar</button>
  </div>
</dialog>